<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Senyh Site</title>
<link rel="stylesheet" href="game-style.css">
</head>
<body>

<!-- MAIN HUB -->
<div id="intro-screen">
    <h1>SENYH SITE</h1>
    <h2>Choose a Game</h2>

    <button class="game-btn" data-game="number-key-game">
        Press The Correct Numbers Game
    </button>

    <button class="game-btn" data-game="order-game">
        Click Numbers In Order (0‚Äì9)
    </button>
</div>

<!-- BGM -->
<audio id="bgm" src="bgm.mp3" loop></audio>

<!-- GAME SECTION -->
<section id="game-section" style="display:none; position:relative;">

    <button id="back-btn">‚Üê Back</button>

    <h2 id="game-title"></h2>
    <p>Time left: <span id="time-left">30</span> seconds</p>
    <p>Score: <span id="score">0</span></p>
    <p>High Score: <span id="high-score">0</span></p>

    <div id="current-number"></div>

    <!-- Emoji Mascot -->
    <div id="mascot">üéâ</div>

    <!-- NUMBER PAD -->
    <div id="number-pad"></div>

    <!-- END SCREEN -->
    <div id="end-screen">
        <h1>Waw Galing!</h1>
        <p>Your Score: <span id="final-score">0</span></p>
        <p>High Score: <span id="final-highscore">0</span></p>
        <button onclick="playAgain()">Play Again</button>
    </div>

</section>

<script>
const bgm = document.getElementById('bgm');
const introScreen = document.getElementById('intro-screen');
const gameSection = document.getElementById('game-section');
const gameButtons = document.querySelectorAll('.game-btn');
const backBtn = document.getElementById('back-btn');
const numberPad = document.getElementById('number-pad');
const mascot = document.getElementById('mascot');

const endScreenSound = new Audio('endsound.mp3');
const gameClickSound = new Audio('gameclick.mp3');
const wrongSound = new Audio('wrong.mp3');
const buttonClickSound = new Audio('buttonclick.mp3');

let score = 0;
let timeLeft = 30;
let currentNumber = 0;
let typedNumber = '';
let timerInterval;
let currentGame = "";
let expectedOrder = 0;
let highScore = 0;

// BUTTON CLICK SOUND
function playButtonSound(){
    const sound = buttonClickSound.cloneNode();
    sound.play();
}

// START GAME
function startGame(gameType){
    currentGame = gameType;
    score = 0;
    timeLeft = 30;
    typedNumber = '';
    expectedOrder = 0;

    document.getElementById('score').textContent = score;
    document.getElementById('time-left').textContent = timeLeft;
    document.getElementById('end-screen').style.display = 'none';
    document.getElementById('current-number').style.display = "block";

    numberPad.innerHTML = "";
    mascot.style.display = "block";

    highScore = localStorage.getItem(gameType + 'HighScore') || 0;
    document.getElementById('high-score').textContent = highScore;

    if(gameType === "number-key-game"){
        document.getElementById('game-title').textContent = "Press the number that appears!";
        createNumberButtons(false);
        spawnNumber();
    }

    if(gameType === "order-game"){
        document.getElementById('game-title').textContent = "Click Numbers In Order (0‚Äì9)";
        document.getElementById('current-number').style.display = "none";
        createNumberButtons(true);
    }

    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('time-left').textContent = timeLeft;

        if(timeLeft <= 0){
            clearInterval(timerInterval);
            showEndScreen();
        }
    }, 1000);
}

// CREATE BUTTONS
function createNumberButtons(shuffle){
    let numbers = [...Array(10).keys()];
    if(shuffle){
        numbers.sort(() => Math.random() - 0.5);
    }

    numbers.forEach(num => {
        const btn = document.createElement('button');
        btn.classList.add('num-btn');
        btn.textContent = num;

        btn.addEventListener('click', () => {
            // Mobile & PC: quick scale animation
            btn.style.transform = "scale(1.2)";
            setTimeout(()=>{ btn.style.transform = ""; }, 80);

            if(currentGame === "number-key-game"){
                handleNumberGame(num, btn);
            }
            else if(currentGame === "order-game"){
                handleOrderGame(num, btn);
            }
        });

        numberPad.appendChild(btn);
    });
}

// NUMBER GAME LOGIC
function spawnNumber(){
    currentNumber = Math.floor(Math.random() * 99) + 1;
    document.getElementById('current-number').textContent = currentNumber;
    typedNumber = '';
}

function handleNumberGame(digit, button){
    typedNumber += digit;

    if(parseInt(typedNumber) === currentNumber){
        score++;
        document.getElementById('score').textContent = score;
        gameClickSound.cloneNode().play();
        spawnNumber();
    }
    else if(parseInt(typedNumber) > currentNumber){
        typedNumber = '';
        wrongSound.currentTime = 0;
        wrongSound.play();
    }
}

// ORDER GAME LOGIC
function handleOrderGame(num, button){
    if(num === expectedOrder){
        gameClickSound.cloneNode().play();
        button.disabled = true;
        button.style.opacity = "0.4";

        expectedOrder++;
        if(expectedOrder > 9){
            score++;
            document.getElementById('score').textContent = score;
            expectedOrder = 0;
            numberPad.innerHTML = "";
            createNumberButtons(true);
        }
    }
    else{
        wrongSound.currentTime = 0;
        wrongSound.play();
    }
}

// END SCREEN
function showEndScreen(){
    bgm.pause();
    document.getElementById('final-score').textContent = score;

    if(score > highScore){
        highScore = score;
        localStorage.setItem(currentGame + 'HighScore', highScore);
    }

    document.getElementById('final-highscore').textContent = highScore;
    document.getElementById('end-screen').style.display = 'flex';
    endScreenSound.currentTime = 0;
    endScreenSound.play();
}

// PLAY AGAIN
function playAgain(){
    document.getElementById('end-screen').style.display = 'none';
    endScreenSound.pause();
    bgm.play();
    startGame(currentGame);
}

// GAME BUTTONS
gameButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        playButtonSound();
        introScreen.style.display = 'none';
        gameSection.style.display = 'block';
        bgm.play().catch(()=>{});
        startGame(btn.dataset.game);
    });
});

// BACK BUTTON
backBtn.addEventListener('click', () => {
    playButtonSound();
    clearInterval(timerInterval);
    gameSection.style.display = 'none';
    document.getElementById('end-screen').style.display = 'none';
    endScreenSound.pause();
    introScreen.style.display = 'flex';
    bgm.pause();
});
</script>

</body>
</html>



